@page "/registration"
@attribute [AllowAnonymous]

<PageTitle>@($"{GlobalConstant.AppName} | User Registration")</PageTitle>

<div class="d-flex justify-content-center align-items-center vh-100">
    <RadzenRow Gap="0"
               Class="rz-mx-6 rz-border-radius-4 rz-shadow-4"
               Style="width: 100%; max-width: 500px; overflow: hidden;">

        <RadzenColumn Size="12">
            <RadzenCard class="rz-p-12">
                <RadzenStack Gap="1.2rem"
                             Orientation="Orientation.Vertical">
                    <RadzenButton Variant="Variant.Text"
                                  Click=@(args => EvBackToPrevious())
                                  Icon="keyboard_return"
                                  Text="Return"
                                  ButtonStyle="ButtonStyle.Primary"
                                  Size="ButtonSize.Medium" class="col-4" />

                    <RadzenText TextStyle="TextStyle.H5"
                                TagName="TagName.H2"
                                Class="rz-mb-3 mx-auto">
                        Register
                    </RadzenText>

                    <RadzenTemplateForm Context="RegistrationContext"
                                        Data="@initialRegistrationData"
                                        Submit="@((UserInitialRegistrationDto args) => RegisterUser(args))">
                        <FluentValidationValidator />

                        <RadzenStack Gap="1.2rem"
                                     Orientation="Orientation.Vertical">

                            <RadzenTextBox Name="Email"
                                           Placeholder="Email"
                                           @bind-Value="initialRegistrationData.Email" />

                            <RadzenPassword Name="Password"
                                            Placeholder="Password"
                                            @bind-Value="initialRegistrationData.Password" />

                            <RadzenPassword Name="ConfirmPassword"
                                            Placeholder="Confirm Password"
                                            @bind-Value="initialRegistrationData.ConfirmPassword" />

                            <ValidationSummary />
                            <RadzenButton Text="Register"
                                          ButtonStyle="ButtonStyle.Secondary"
                                          ButtonType="ButtonType.Submit" />

                        </RadzenStack>
                    </RadzenTemplateForm>
                    <RadzenAlert AlertStyle="AlertStyle.Danger"
                                 Variant="Variant.Flat"
                                 Shade="Shade.Lighter"
                                 @bind-Visible="AlertVisible">
                        @ErrorMessage
                    </RadzenAlert>
                </RadzenStack>
            </RadzenCard>
        </RadzenColumn>
    </RadzenRow>
</div>
