@page "/products/create"
@page "/products/edit"
@page "/products/edit/{ParamProductID:guid}"

<PageTitle>@($"{ApplicationDetail?.ApplicationName} | {ProductPageModel?.Title}")</PageTitle>

<MainMenuContainer>
    <MainTransactionButton OnButtonBackClicked="EvBackToPrevious" />
</MainMenuContainer>

<RadzenRow Gap="0.5rem" RowGap="0.5rem">
    <RadzenColumn SizeLG="6" SizeMD="12" class="rz-pb-5">
        <TransactionPageHeader FormStatus="@FormStatus" AdditionalText="@AdditionalHeaderText" />
        <RadzenCard class="my-2">
            <RadzenTemplateForm Data="@ProductInputState.Product" Submit="@((ProductDto args) =>SubmitAsync(args))">
                <FluentValidationValidator @ref="ProductValidator" />

                <RadzenStack Gap="1rem">
                    <ProductCategoryDropdown @bind-SelectedValue="ProductInputState.Product.CategoryID" />

                    <RadzenTextBox Name="@nameof(ProductInputState.Product.Name)"
                                   Placeholder="Name"
                                   @bind-Value="ProductInputState.Product.Name"
                                   @ref="@txtNameForFocus" />

                    <RadzenTextBox Name="@nameof(ProductInputState.Product.SKU)"
                                   Placeholder="SKU"
                                   @bind-Value="ProductInputState.Product.SKU" />

                    <RadzenNumeric TValue="decimal"
                                   Format="" @bind-Value="ProductInputState.Product.Price"
                                   Placeholder="Price"
                                   InputAttributes="@(new Dictionary<string,object>(){ { "aria-label", "enter value" }})" />

                    <ProductImageUpload @ref="ProductImageUploadRef"
                                        ImageFromServer=@ProductInputState.Product.ImageUrl />

                    <RadzenTextArea Name="@nameof(ProductInputState.Product.Description)"
                                    Placeholder="Description"
                                    class="w-100"
                                    aria-label="TextArea"
                                    @bind-Value="ProductInputState.Product.Description" />
                </RadzenStack>

                <ValidationSummary />

                <SaveTransactionButton OnButtonClear="ClearField"
                                       IsBusy="@IsSaving" />

            </RadzenTemplateForm>
        </RadzenCard>
    </RadzenColumn>
</RadzenRow>